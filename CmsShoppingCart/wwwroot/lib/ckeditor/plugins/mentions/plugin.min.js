!function(){function a(t,e){var n,a,o,s,i,r=e.feed;function c(t,e){var n=t.slice(0,e).match(i);return n&&(void 0===(t=t[n.index-1])||t.match(/\s+/))?{start:n.index,end:e}:null}this.caseSensitive=e.caseSensitive,this.marker=e.hasOwnProperty("marker")?e.marker:"@",this.minChars=null!==e.minChars&&void 0!==e.minChars?e.minChars:2,(n=e.pattern)||(n=this.minChars,a="\\"+this.marker+"[_a-zA-Z0-9À-ž]",a=(n?a+"{"+n+",}":a+"*")+"$",n=new RegExp(a)),this.pattern=n,this.cache=void 0===e.cache||e.cache,this.followingSpace=e.followingSpace,this.throttle=void 0!==e.throttle?e.throttle:200,this._autocomplete=new CKEDITOR.plugins.autocomplete(t,{textTestCallback:(this.marker,this.minChars,i=this.pattern,function(t){return t.collapsed?CKEDITOR.plugins.textMatch.match(t,c):null}),dataCallback:(o=r,s=this,function(t,e){function n(t){t&&(t=CKEDITOR.tools.array.map(t,function(t){return CKEDITOR.tools.object.merge(t,{name:s.marker+t.name})}),e(t))}var a,i,r=t.query;s.marker&&(r=r.substring(s.marker.length)),CKEDITOR.tools.array.isArray(o)?(a=1,n(CKEDITOR.tools.array.reduce(o,function(t,e){return t.push({name:e,id:a++}),t},[]).filter(function(t){return t=t.name,s.caseSensitive||(t=t.toLowerCase(),r=r.toLowerCase()),0===t.indexOf(r)}))):"string"!=typeof o?o({query:r,marker:s.marker},n):(i=new CKEDITOR.template(o).output({encodedQuery:encodeURIComponent(r)}),s.cache&&l[i]?n(l[i]):CKEDITOR.ajax.load(i,function(t){t=JSON.parse(t),s.cache&&null!==t&&(l[i]=t),n(t)}))}),itemTemplate:e.itemTemplate,outputTemplate:e.outputTemplate,throttle:this.throttle,itemsLimit:e.itemsLimit,followingSpace:this.followingSpace})}CKEDITOR._.mentions={cache:{}};var l=CKEDITOR._.mentions.cache;CKEDITOR.plugins.add("mentions",{requires:"autocomplete,textmatch,ajax",instances:[],init:function(e){var n=this;e.on("instanceReady",function(){CKEDITOR.tools.array.forEach(e.config.mentions||[],function(t){n.instances.push(new a(e,t))})})},isSupportedEnvironment:function(t){return t.plugins.autocomplete.isSupportedEnvironment(t)}}),a.prototype={destroy:function(){this._autocomplete.destroy()}},CKEDITOR.plugins.mentions=a}();